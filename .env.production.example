# ═══════════════════════════════════════════════════
# RDVPriority - Production Environment Variables
# ═══════════════════════════════════════════════════
# Copy this file to .env and fill in ALL values before deploying.
# Generate secrets with: openssl rand -base64 32
# ═══════════════════════════════════════════════════

# ── Database ──────────────────────────────────────
# Used by docker-compose.prod.yml for PostgreSQL container
POSTGRES_USER=rdv_prod_user
POSTGRES_PASSWORD=CHANGE_ME_GENERATE_STRONG_PASSWORD
POSTGRES_DB=rdvpriority

# Full connection string (constructed from above, used by API/workers)
DATABASE_URL=postgresql://rdv_prod_user:CHANGE_ME_GENERATE_STRONG_PASSWORD@postgres:5432/rdvpriority
DATABASE_POOL_SIZE=20
DATABASE_POOL_TIMEOUT=10

# ── Redis ─────────────────────────────────────────
REDIS_URL=redis://redis:6379

# ── Authentication ────────────────────────────────
# CRITICAL: Generate unique secrets, minimum 32 characters each
# Run: openssl rand -base64 32
JWT_SECRET=CHANGE_ME_RUN_openssl_rand_base64_32
JWT_REFRESH_SECRET=CHANGE_ME_RUN_openssl_rand_base64_32_DIFFERENT

# ── Stripe Payments ──────────────────────────────
# Dashboard: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_live_CHANGE_ME
# Webhook: https://dashboard.stripe.com/webhooks
# Endpoint URL: https://YOUR_DOMAIN/api/billing/webhook
# Events to listen: checkout.session.completed, invoice.payment_succeeded, customer.subscription.deleted
STRIPE_WEBHOOK_SECRET=whsec_CHANGE_ME

# ── Email (Resend) ───────────────────────────────
# Dashboard: https://resend.com/api-keys
RESEND_API_KEY=re_CHANGE_ME
EMAIL_FROM=alerte@rdvpriority.fr

# ── SMS (Twilio) ─────────────────────────────────
# Console: https://console.twilio.com
TWILIO_ACCOUNT_SID=AC_CHANGE_ME
TWILIO_AUTH_TOKEN=CHANGE_ME
TWILIO_PHONE_NUMBER=+33CHANGE_ME

# ── Telegram ─────────────────────────────────────
# Create bot: https://t.me/BotFather
TELEGRAM_BOT_TOKEN=CHANGE_ME

# ── WhatsApp Cloud API (Meta) ─────────────────────
# Setup: https://developers.facebook.com → Create App → Add WhatsApp
# 1000 free conversations/month, then ~€0.03/conversation
WHATSAPP_PHONE_ID=CHANGE_ME
WHATSAPP_ACCESS_TOKEN=CHANGE_ME

# ── Firebase (FCM Push) ──────────────────────────
# Console: https://console.firebase.google.com → Project Settings → Service Accounts
FIREBASE_PROJECT_ID=CHANGE_ME
FIREBASE_CLIENT_EMAIL=CHANGE_ME
FIREBASE_PRIVATE_KEY=CHANGE_ME

# ── Anti-Bot Infrastructure ──────────────────────
# At least one proxy provider recommended for production
SCRAPERAPI_KEY=
TWOCAPTCHA_API_KEY=

# ── Error Monitoring ─────────────────────────────
# Dashboard: https://sentry.io
SENTRY_DSN=

# ── App Configuration ────────────────────────────
FRONTEND_URL=https://rdvpriority.fr
PORT=4000
NODE_ENV=production

# ── Bootstrap Mode (€15-20/month budget) ─────────
# Enable for budget-constrained launch
# - Monitors only 5 high-demand prefectures
# - 3x slower scraping intervals (saves bandwidth)
# - Manual CAPTCHA solving via Telegram alerts
BOOTSTRAP_MODE=true

# Your Telegram chat ID for manual CAPTCHA alerts
# Message @userinfobot on Telegram to get your ID
ADMIN_TELEGRAM_CHAT_ID=CHANGE_ME
